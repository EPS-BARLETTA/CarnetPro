<!doctype html><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Kill SW + Cache</title>
<style>
body{font-family:system-ui;background:#0b1324;color:#fff;display:grid;place-items:center;min-height:100vh;margin:0}
.card{max-width:760px;padding:24px;border-radius:16px;background:#111827;border:1px solid #374151}
.btn{padding:12px 16px;border-radius:12px;border:0;background:#ef4444;color:#fff;font-weight:800;cursor:pointer}
pre{background:#000;padding:12px;border-radius:8px;overflow:auto;color:#0f0;max-height:40vh}
a.btn{display:inline-block;text-decoration:none;background:#2563eb;margin-top:10px}
</style>
<div class="card">
  <h1>Suppression agressive du Service Worker</h1>
  <p>Clique ci-dessous pour <strong>désinstaller tous les SW</strong>, <strong>vider les caches</strong>, puis <strong>ouvrir l'app standalone</strong>.</p>
  <button class="btn" id="go">Tout supprimer maintenant</button>
  <pre id="log">—</pre>
  <a class="btn" href="app-standalone-2025-09-21.html">Accéder à l'app standalone</a>
</div>
<script>
const log=(m)=>{document.getElementById('log').textContent += m+"\\n";}
document.getElementById('go').onclick = async ()=>{
  try{
    if('serviceWorker' in navigator){
      const regs = await navigator.serviceWorker.getRegistrations();
      for(const r of regs){ log('Unregister: '+(r.scope||'?')); await r.unregister(); }
    }
    if('caches' in window){
      const keys = await caches.keys();
      for(const k of keys){ log('Delete cache: '+k); await caches.delete(k); }
    }
    localStorage.clear(); sessionStorage.clear();
    log('OK. Ouvre l’app via le bouton ci-dessous.');
  }catch(e){ log('Erreur: '+(e?.message||e)); }
};
</script>
